## rn与flutter的对比

以React Native为代表的一类框架将最终渲染工作交还给了系统，虽然同样使用类HTML+JS的UI构建逻辑，但是最终会生成对应的自定义原生控件，以充分利用原生控件相对于WebView的较高的绘制效率。与此同时这种策略也将框架本身和App开发者绑在了系统的控件系统上，不仅框架本身需要处理大量平台相关的逻辑，随着系统版本变化和API的变化，开发者可能也需要处理不同平台的差异，甚至有些特性只能在部分平台上实现，这样框架的跨平台特性就会大打折扣。

Flutter则开辟了一种全新的思路，从头到尾重写一套跨平台的UI框架，包括UI控件、渲染逻辑甚至开发语言。渲染引擎依靠跨平台的Skia图形库来实现，依赖系统的只有图形绘制相关的接口，可以在最大程度上保证不同平台、不同设备的体验一致性，逻辑处理使用支持AOT的Dart语言，执行效率也比JavaScript高得多。

Flutter控件主要分为两大类，StatelessWidget和StatefulWidget。StatelessWidget用来展示静态的文本或者图片，如果控件需要根据外部数据或者用户操作来改变的话，就需要使用StatefulWidget。

总结: rn交给系统渲染，flutter靠自身的UI框架渲染(UI: skia LOGIC: Dart)

Dart VM

skia: 运行在多个硬件平台的图形绘制库

logic: dart
  - 健全的类型系统: 同时支持静态类型检查和运行时类型检查
  - 代码体积优化: 编译时只保留运行时需要调用的代码（不允许反射这样的隐式引用），所以庞大的Widgets库不会造成发布体积过大
  - 丰富的底层库，Dart自身提供了非常多的库
  - 编译: 同时支持JIT(即时编译)和AOT(运行前编译)
  - 内存分配与垃圾回收: Isolate 是类似于线程但不共享内存，多生代无锁垃圾回收器，专门为UI框架中常见的大量Widgets对象创建和销毁优化
  - 单线程模型: 不会抢占线程
  - 无需单独声明布局语言: jsx/xml
  - 跨平台，iOS和Android共用一套代码
